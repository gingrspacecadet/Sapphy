<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sapphy | Register</title>
  <link rel="stylesheet" href="../styles/styles.css"/>
</head>
<body>
  <div class="register-container">
    <form id="registerForm">
      <h1>Register</h1>

      <div class="name-row">
        <div class="input-group">
          <label for="fname">First Name:</label>
          <input type="text" id="fname" name="fname" required/>
        </div>
      
        <div class="input-group">
          <label for="lname">Last Name:</label>
          <input type="text" id="lname" name="lname" required/>
        </div>
      </div>

      <div class="input-group">
        <label for="age">Age:</label>
        <select id="age" name="age" required>
          <option value="" disabled selected></option>
        </select>
      </div>
      
      <div class="location-row">
        <div class="input-group dropdown-container">
          <label for="country">Country:</label>
          <select id="country" name="country" required>
            <option value="" disabled selected>Select a country</option>
          </select>
          <input type="text" id="countrySearch" class="search-input" placeholder="Search country..." oninput="filterOptions('country', 'countrySearch')"/>
        </div>
      
        <div class="input-group dropdown-container">
          <label for="city">City:</label>
          <select id="city" name="city" required disabled>
            <option value="" disabled selected>Select a city</option>
          </select>
          <input type="text" id="citySearch" class="search-input" placeholder="Search city..." oninput="filterOptions('city', 'citySearch')"/>
        </div>
      </div>
      
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required/>

      <label for="password">Password:</label>
      <input type="password" id="password" name="password" required/>

      <div class="input-group">
        <label for="bio">Bio:</label>
        <textarea id="settings-form" name="bio" rows="4" placeholder="Tell us about yourself..." maxlength="256" required></textarea>
        <p><span id="char-count">256</span>/256</p>
      </div>

      <button type="submit" onclick="console.log('✅ Submit button clicked')">Register</button>
      <p>Already have an account? <a href="login.html">Login</a></p>
      <p>By registering, you agree to our <a href="terms.html">Terms of Service</a> and <a href="privacy.html">Privacy Policy</a>.</p>
    </form>
  </div>

  <script src="../javascript/scripts.js"></script>
  <script src="../javascript/location.js"></script>
  <script src="../javascript/settings.js"></script>
  <script>
    const ageSelect = document.getElementById('age');
    for (let i = 18; i <= 99; i++) {
      const option = document.createElement('option');
      option.value = i;
      option.textContent = i;
      ageSelect.appendChild(option);
    }
  
    const option100plus = document.createElement('option');
    option100plus.value = "100+";
    option100plus.textContent = "100+";
    ageSelect.appendChild(option100plus);

    function filterOptions(selectId, searchId) {
      const select = document.getElementById(selectId);
      const searchValue = document.getElementById(searchId).value.toLowerCase();
      Array.from(select.options).forEach(option => {
        option.style.display = option.textContent.toLowerCase().includes(searchValue) ? '' : 'none';
      });
    }

    function toggleSearch(searchId, isVisible) {
      const searchInput = document.getElementById(searchId);
      searchInput.classList.toggle('hidden', !isVisible);
    }
  </script>
  
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("registerForm");
      if (form) {
        form.addEventListener("submit", (e) => {
          e.preventDefault();
          console.log("✅ Manual form submit captured");
        });
      }
    });
  </script>
  <script>
      const textarea = document.getElementById('settings-form');
      const count = document.getElementById('char-count');
  
      textarea.addEventListener('input', () => {
          count.textContent = 256 - textarea.value.length;
      });
  </script>  

  <footer>
    <p>&copy; 2025 Sapphy. All rights reserved.</p>
  </footer>
</body>
</html>